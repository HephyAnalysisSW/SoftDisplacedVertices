# GLOBAL DEFINITIONS
# ------------------------------------------------------------------------
muon_sel:   (Muon_looseId>0)           && (Muon_eta<2.4)     && (Muon_pt>10)
ele_sel:    (Electron_cutBased>=1)     && (Electron_eta<2.5) && (Electron_pt>10)
photon_sel: (Photon_cutBased>=1)       && (Photon_eta<2.5)   && (Photon_pt>15)
tau_sel:    (Tau_idDecayModeOldDMs>=1) && (Tau_eta<2.3)      && (Tau_pt>18)

bjetgen:    (Jet_hadronFlavour==4) && (Jet_hadronFlavour==5) # 4==c-hadron, 5==b-hadron
jet_sel:    (Jet_jetId==6) && (abs(Jet_eta)<2.4) && (Jet_neHEF<0.8) && (Jet_chHEF>0.1) && (Jet_pt>20)
bjettight:  (Jet_jetId==6) && (abs(Jet_eta)<2.4) && (Jet_neHEF<0.8) && (Jet_chHEF>0.1) && (Jet_pt>20) && Jet_btagDeepFlavB>0.71

presel: HLT_PFMETNoMu120_PFMHTNoMu120_IDTight && (nJet_mapveto==0) && (nJet_sel>0) && leadingjet_pt_sel>100 && ecalBadCalibFilter && Flag_goodVertices && Flag_globalSuperTightHalo2016Filter && Flag_EcalDeadCellTriggerPrimitiveFilter && Flag_BadPFMuonFilter && Flag_BadPFMuonDzFilter && Flag_hfNoisyHitsFilter && Flag_eeBadScFilter && nJetHEM==0 && dphi_MET_jet0>1.0 && nMuon_sel==0 && nEle_sel==0 && nPhoton_sel==0 && nTau_sel==0

corrections:
  PU:
    "2022":
      path: "/cvmfs/cms.cern.ch/rsync/cms-nanoAOD/jsonpog-integration/POG/LUM/2022_Summer22/puWeights.json.gz"
      name: "Collisions2022_355100_357900_eraBCD_GoldenJson"
      mode: "nominal"
    "2022EE":
      path: "/cvmfs/cms.cern.ch/rsync/cms-nanoAOD/jsonpog-integration/POG/LUM/2022_Summer22EE/puWeights.json.gz"
      name: "Collisions2022_359022_362760_eraEFG_GoldenJson"
      mode: "nominal"
  met:
    # mode: "nominal"
  # objects:
  #   SDVSecVtx: 

mapveto:
  # material:
  #   data_path: "/eos/vbc/group/cms/ang.li/material_map/material_map_2tk_loose.root"
  #   mc_path: "/eos/vbc/group/cms/ang.li/material_map/material_map_MC_2tk_loose.root"
  jetveto:
    "2022":
      path: "/scratch-cbe/users/alikaan.gueven/AN_plots/checks_2022/Summer22_23Sep2023_RunCD_v1.root"
    "2022EE":
      path: "/scratch-cbe/users/alikaan.gueven/AN_plots/checks_2022/Summer22EE_23Sep2023_RunEFG_v1.root"


new_variables:

  # select jets
  # ------------------------------------------------------------------------
  Jet_pt_sel:  ['Jet_pt[{0}]',  jet_sel] 
  Jet_eta_sel: ['Jet_eta[{0}]', jet_sel]
  Jet_phi_sel: ['Jet_phi[{0}]', jet_sel]
  nJet_sel:    ['Sum({0})',     jet_sel]

  leadingjet_pt_sel:  Jet_pt_sel[0]
  leadingjet_eta_sel: Jet_eta_sel[0]
  leadingjet_phi_sel: Jet_phi_sel[0]

  # define track vars
  # ------------------------------------------------------------------------
  SDVTrack_isInSV:      Track_isInSV(SDVIdxLUT_TrackIdx,nSDVTrack)
  SDVTrack_qoverp:      SDVTrack_charge/SDVTrack_pt
  SDVTrack_absdxy:      abs(SDVTrack_dxy)
  SDVTrack_absdz:       abs(SDVTrack_dz)
  SDVTrack_dxySig:      abs(SDVTrack_dxy)/SDVTrack_dxyError
  SDVTrack_dzSig:       abs(SDVTrack_dz)/SDVTrack_dzError
  SDVTrack_ptSig:       SDVTrack_pt / SDVTrack_ptError
  SDVTrack_ptSig_inv:   SDVTrack_ptError / SDVTrack_pt
  SDVTrack_dphi_jet0:   acos(cos(SDVTrack_phi-Jet_phi_sel[0]))
  SDVTrack_deta_jet0:   abs(SDVTrack_eta-Jet_eta_sel[0])
  

  SDVTrack_dR_jet0:     sqrt(SDVTrack_dphi_jet0*SDVTrack_dphi_jet0 + SDVTrack_deta_jet0*SDVTrack_deta_jet0)
  SDVTrack_dphi_MET:    acos(cos(SDVTrack_phi-MET_phi_corr))
  SDVTrack_dxydzratio:  abs(SDVTrack_dxy/SDVTrack_dz)

  SDVTrack_noPU:            SDVTrack_dxydzratio>0.25
  SDVTrack_isQualityTrack:  (SDVTrack_normalizedChi2 < 5) && (SDVTrack_numberOfValidHits>13) && ((SDVTrack_ptError/SDVTrack_pt)<0.015) && (SDVTrack_dxydzratio>0.25)
  SDVTrack_isGoodTrack:     ((abs(SDVTrack_dxy)/SDVTrack_dxyError)>4 ) && (SDVTrack_normalizedChi2 < 5) && (SDVTrack_numberOfValidHits>13) && ((SDVTrack_ptError/SDVTrack_pt)<0.015) && (SDVTrack_dxydzratio>0.25) && ( acos(cos(SDVTrack_phi-Jet_phi[0]))>1 ) && ( acos(cos(SDVTrack_phi-MET_phi_corr))<1.5 ) && (SDVTrack_pfRelIso03_all<5)
  SDVTrack_isGoodTrack_b:   ((abs(SDVTrack_dxy)/SDVTrack_dxyError)>4 ) && (SDVTrack_normalizedChi2 < 5) && (SDVTrack_numberOfValidHits>13) && ((SDVTrack_ptError/SDVTrack_pt)<0.015) && (SDVTrack_dxydzratio>0.25)
  SDVTrack_isGoodTrack_A1:  ((abs(SDVTrack_dxy)/SDVTrack_dxyError)>4 ) && (SDVTrack_dxydzratio>0.25)
  SDVTrack_isGoodTrack_A2:  (SDVTrack_normalizedChi2 < 5)              && (SDVTrack_dxydzratio>0.25)
  SDVTrack_isGoodTrack_A3:  (SDVTrack_numberOfValidHits>13)            && (SDVTrack_dxydzratio>0.25)
  SDVTrack_isGoodTrack_A4:  ((SDVTrack_ptError/SDVTrack_pt)<0.015)     && (SDVTrack_dxydzratio>0.25)

  # define vertecx vars
  # ------------------------------------------------------------------------
  SDVSecVtx_nqtk:  SDVSecVtx_nGoodTrack(SDVIdxLUT_SecVtxIdx,SDVIdxLUT_TrackIdx,SDVTrack_isQualityTrack,nSDVSecVtx)
  SDVSecVtx_ngoodtk:  SDVSecVtx_nGoodTrack(SDVIdxLUT_SecVtxIdx,SDVIdxLUT_TrackIdx,SDVTrack_isGoodTrack,nSDVSecVtx)
  SDVSecVtx_ngoodtkb: SDVSecVtx_nGoodTrack(SDVIdxLUT_SecVtxIdx,SDVIdxLUT_TrackIdx,SDVTrack_isGoodTrack_b,nSDVSecVtx)
  SDVSecVtx_ngoodtk_A1:  SDVSecVtx_nGoodTrack(SDVIdxLUT_SecVtxIdx,SDVIdxLUT_TrackIdx,SDVTrack_isGoodTrack_A1,nSDVSecVtx)
  SDVSecVtx_ngoodtk_A2:  SDVSecVtx_nGoodTrack(SDVIdxLUT_SecVtxIdx,SDVIdxLUT_TrackIdx,SDVTrack_isGoodTrack_A2,nSDVSecVtx)
  SDVSecVtx_ngoodtk_A3:  SDVSecVtx_nGoodTrack(SDVIdxLUT_SecVtxIdx,SDVIdxLUT_TrackIdx,SDVTrack_isGoodTrack_A3,nSDVSecVtx)
  SDVSecVtx_ngoodtk_A4:  SDVSecVtx_nGoodTrack(SDVIdxLUT_SecVtxIdx,SDVIdxLUT_TrackIdx,SDVTrack_isGoodTrack_A4,nSDVSecVtx)
  SDVSecVtx_nnonputk: SDVSecVtx_nGoodTrack(SDVIdxLUT_SecVtxIdx,SDVIdxLUT_TrackIdx,SDVTrack_noPU,nSDVSecVtx)
  
  SDVSecVtx_TkMaxdphi: "SDV_TkMaxdphi(SDVIdxLUT_TrackIdx, SDVIdxLUT_SecVtxIdx, nSDVSecVtx, SDVTrack_phi)"
  SDVSecVtx_TkMindphi: "SDV_TkMindphi(SDVIdxLUT_TrackIdx, SDVIdxLUT_SecVtxIdx, nSDVSecVtx, SDVTrack_phi)"
  SDVSecVtx_TkMaxdeta: "SDV_TkMaxdphi(SDVIdxLUT_TrackIdx, SDVIdxLUT_SecVtxIdx, nSDVSecVtx, SDVTrack_eta)"
  SDVSecVtx_TkMindeta: "SDV_TkMindphi(SDVIdxLUT_TrackIdx, SDVIdxLUT_SecVtxIdx, nSDVSecVtx, SDVTrack_eta)"
  SDVSecVtx_TkMaxdR:   "SDV_TkMaxdR(SDVIdxLUT_TrackIdx, SDVIdxLUT_SecVtxIdx, nSDVSecVtx, SDVTrack_eta, SDVTrack_phi)"
  SDVSecVtx_TkMindR:   "SDV_TkMindR(SDVIdxLUT_TrackIdx, SDVIdxLUT_SecVtxIdx, nSDVSecVtx, SDVTrack_eta, SDVTrack_phi)"
  

  SDVSecVtx_dphiMET:    acos(cos(SDVSecVtx_L_phi-MET_phi_corr))
  SDVSecVtx_dphijet0:   acos(cos(SDVSecVtx_L_phi-Jet_phi_sel[0]))

  Muon_dphiMET:    acos(cos(Muon_phi-MET_phi_corr))
  Muon_dphijet0:   acos(cos(Muon_phi-Jet_phi_sel[0]))

  Electron_dphiMET:    acos(cos(Electron_phi-MET_phi_corr))
  Electron_dphijet0:   acos(cos(Electron_phi-Jet_phi_sel[0]))

  Tau_dphiMET:    acos(cos(Tau_phi-MET_phi_corr))
  Tau_dphijet0:   acos(cos(Tau_phi-Jet_phi_sel[0]))

  bJet_phi_tight : ['Jet_phi[{0}]', bjettight]
  bJet_eta_tight : ['Jet_eta[{0}]', bjettight]

  bjettight :      ['{0}', bjettight]
  nbJet_tight: ['Sum({0})',bjettight]

  Jet_nTracks_dR0p2 :     GetJetnTracks(SDVTrack_pt, SDVTrack_phi, SDVTrack_eta, Jet_phi_sel, Jet_eta_sel, 0.2, 0.0)
  Jet_nTracks_dR0p4 :     GetJetnTracks(SDVTrack_pt, SDVTrack_phi, SDVTrack_eta, Jet_phi_sel, Jet_eta_sel, 0.4, 0.0)
  Jet_nTracks_dR0p2_pt1 : GetJetnTracks(SDVTrack_pt, SDVTrack_phi, SDVTrack_eta, Jet_phi_sel, Jet_eta_sel, 0.2, 1.0)
  Jet_nTracks_dR0p4_pt1 : GetJetnTracks(SDVTrack_pt, SDVTrack_phi, SDVTrack_eta, Jet_phi_sel, Jet_eta_sel, 0.4, 1.0)

  SDVSecVtx_mindRdphidetabJet_tight:  "Vertex_mindRdetadphi(SDVSecVtx_L_phi,SDVSecVtx_L_eta,bJet_phi_tight,bJet_eta_tight)"
  SDVSecVtx_closestbJetdR_tight:      "SDVSecVtx_mindRdphidetabJet_tight[0]"
  SDVSecVtx_closestbJetdphi_tight:    "SDVSecVtx_mindRdphidetabJet_tight[1]"
  SDVSecVtx_closestbJetdeta_tight:    "SDVSecVtx_mindRdphidetabJet_tight[2]"

  SDVSecVtx_mindRdphidetaJet:  "Vertex_mindRdetadphi(SDVSecVtx_L_phi, SDVSecVtx_L_eta, Jet_phi_sel, Jet_eta_sel)"
  SDVSecVtx_closestJetdR:      "SDVSecVtx_mindRdphidetaJet[0]"
  SDVSecVtx_closestJetdphi:    "SDVSecVtx_mindRdphidetaJet[1]"
  SDVSecVtx_closestJetdeta:    "SDVSecVtx_mindRdphidetaJet[2]"


  SDVSecVtx_minmaxtkdxy: SDV_TkMinMaxdxy(SDVIdxLUT_TrackIdx, SDVIdxLUT_SecVtxIdx, nSDVSecVtx, SDVTrack_dxy)
  SDVSecVtx_TkMindxy:    SDVSecVtx_minmaxtkdxy[0]
  SDVSecVtx_TkMaxdxy:    SDVSecVtx_minmaxtkdxy[1]

  SDVSecVtx_closestbJetidx_tight: "vtx_jetidx_at_mindR(SDVSecVtx_L_phi,SDVSecVtx_L_eta,bJet_phi_tight,bJet_eta_tight)"
  SDVSecVtx_closestbJet_btagDeepFlavB_tight: ROOT::VecOps::Take(Jet_btagDeepFlavB[bjettight], SDVSecVtx_closestbJetidx_tight)

  
  nMuon_sel:    ['Sum({0})',    muon_sel  ]
  nEle_sel:     ['Sum({0})',    ele_sel   ]
  nPhoton_sel:  ['Sum({0})',    photon_sel]
  nTau_sel:     ['Sum({0})',    tau_sel   ]

  b0_sel_tight:       SDVSecVtx_closestbJetdR_tight<0.1  && (SDVSecVtx_mass<0.4 || SDVSecVtx_mass>0.6) && SDVSecVtx_ndof>1


  nJet_mapveto: Sum(Jet_mapveto==1)
  dphi_Jet_PuppiMET: acos(cos(PuppiMET_phi - Jet_phi))
  ecalBadCalibFilter_jet: (Jet_pt>50) && (Jet_eta > -0.5) && (Jet_eta < -0.1) && (Jet_phi > -2.1 ) && (Jet_phi < -1.8) && ((Jet_neEmEF > 0.9) || (Jet_chEmEF > 0.9)) && (dphi_Jet_PuppiMET > 2.9)
  ecalBadCalibFilter: "!((PuppiMET_pt>100) && (Sum(ecalBadCalibFilter_jet)>0))"


  dphi_MET_jet0: acos(cos(leadingjet_phi_sel-MET_phi_corr))

  common_vertexCuts: SDVSecVtx_ndof>1  && SDVSecVtx_pAngle>0.2 && SDVSecVtx_dphiMET<1.5 && SDVSecVtx_dphijet0>1 && SDVSecVtx_nnonputk>0
  
  TP_vertexCuts:   common_vertexCuts && SDVSecVtx_ngoodtk>=3 
  MP_vertexCuts:   common_vertexCuts && SDVSecVtx_ngoodtk==2
  LP_vertexCuts:   common_vertexCuts && SDVSecVtx_ngoodtk==1 
  CP_vertexCuts:   common_vertexCuts && SDVSecVtx_ngoodtk==0 

  nGoodVtx_TP:  Sum(TP_vertexCuts)
  nGoodVtx_MP:  Sum(MP_vertexCuts)
  nGoodVtx_LP:  Sum(LP_vertexCuts)
  nGoodVtx_CP:  Sum(CP_vertexCuts)
  nGoodVtx:     Sum(common_vertexCuts)

  TP_MaxLxySig:  Max(SDVSecVtx_LxySig[TP_vertexCuts])
  MP_MaxLxySig:  Max(SDVSecVtx_LxySig[MP_vertexCuts])
  LP_MaxLxySig:  Max(SDVSecVtx_LxySig[LP_vertexCuts])
  CP_MaxLxySig:  Max(SDVSecVtx_LxySig[CP_vertexCuts])
new_variables_mc:
  nbJet_gen:                        ['Sum({0})',     bjetgen]
  bJet_eta_gen:                     ['Jet_eta[{0}]', bjetgen]
  bJet_phi_gen:                     ['Jet_phi[{0}]', bjetgen]
  SDVSecVtx_mindRdphidetabJet_gen:  "Vertex_mindRdetadphi(SDVSecVtx_L_phi,SDVSecVtx_L_eta,bJet_phi_gen,bJet_eta_gen)"
  SDVSecVtx_closestbJetdR_gen:      "SDVSecVtx_mindRdphidetabJet_gen[0]"
  SDVSecVtx_closestbJetdphi_gen:    "SDVSecVtx_mindRdphidetabJet_gen[1]"
  SDVSecVtx_closestbJetdeta_gen:    "SDVSecVtx_mindRdphidetabJet_gen[2]"


regions:
  # all:    
  MET200:          MET_pt_corr>200
  # MET200_ngoodVtx: MET_pt_corr>200 && nGoodVtx>0
  # MET400:            MET_pt_corr>400
  # MET400:          MET_pt_corr>400 && nGoodVtx>0
  # selvtx:          MET_pt_corr>400 && nGoodVtx>0
  # TP:              MET_pt_corr>400 && nGoodVtx>0 && nGoodVtx_TP >0
  # MP:              MET_pt_corr>400 && nGoodVtx>0 && nGoodVtx_TP==0 && nGoodVtx_MP >0
  # LP:              MET_pt_corr>400 && nGoodVtx>0 && nGoodVtx_TP==0 && nGoodVtx_MP==0 && nGoodVtx_LP >0
  # CP:              MET_pt_corr>400 && nGoodVtx>0 && nGoodVtx_TP==0 && nGoodVtx_MP==0 && nGoodVtx_LP==0 && nGoodVtx_CP >0

event_variables:
  - MET_pt_corr
  - MET_phi_corr
  - nSDVSecVtx
  - nSDVTrack
  - nJet_sel
  - nbJet_tight
  - dphi_MET_jet0
  - leadingjet_pt_sel
  - leadingjet_phi_sel
  - leadingjet_eta_sel
  - PV_ndof          
  - PV_chi2    
  - PV_score   
  - PV_npvs    
  - PV_npvsGood
event_variables_mc:
  - LHE_HT
event_2d_plots:
  - [leadingjet_eta_sel, leadingjet_phi_sel]

objects:
  SDVSecVtx:
    selections:
      # all:
      # ok:   SDVSecVtx_ndof>1 && SDVSecVtx_nnonputk>0
      # good: SDVSecVtx_ndof>1 && SDVSecVtx_nqtk
      goodvtx: common_vertexCuts && SDVSecVtx_ngoodtk>0
      # tight:      b0_sel_tight && SDVSecVtx_ngoodtkb>=1

    variables:
      - SDVSecVtx_mass
      - SDVSecVtx_Lxy
      - SDVSecVtx_LxySig
      - SDVSecVtx_pAngle
      - SDVSecVtx_dphiMET
      - SDVSecVtx_dphijet0 
      - SDVSecVtx_nTracks
      - SDVSecVtx_ngoodtk
      - SDVSecVtx_ngoodtk_A1
      - SDVSecVtx_ngoodtk_A2
      - SDVSecVtx_ngoodtk_A3
      - SDVSecVtx_ngoodtk_A4
      - SDVSecVtx_ngoodtkb
      - SDVSecVtx_nnonputk
      - SDVSecVtx_ndof
      - SDVSecVtx_charge
      - SDVSecVtx_closestbJetdR_tight
      - SDVSecVtx_closestbJetdphi_tight
      - SDVSecVtx_closestbJetdeta_tight
      - SDVSecVtx_closestbJet_btagDeepFlavB_tight
      - SDVSecVtx_closestJetdR
      - SDVSecVtx_closestJetdphi
      - SDVSecVtx_closestJetdeta
      - SDVSecVtx_TkMaxdphi
      - SDVSecVtx_TkMindphi
      - SDVSecVtx_TkMaxdeta
      - SDVSecVtx_TkMindeta
      - SDVSecVtx_TkMaxdR
      - SDVSecVtx_TkMindR
      - SDVSecVtx_TkMindxy
      - SDVSecVtx_TkMaxdxy
    variables_mc:
      # - nbJet_gen                      
      # - bJet_eta_gen                   
      # - bJet_phi_gen                   
      - SDVSecVtx_closestbJetdR_gen     
      - SDVSecVtx_closestbJetdphi_gen  
      - SDVSecVtx_closestbJetdeta_gen  

    2d_plots:
      # - [SDVSecVtx_Lxy,                              SDVSecVtx_LxySig]

  Jet:
    selections:
      all:
      # ok: (Jet_jetId==6) && (abs(Jet_eta)<2.4) && (Jet_neHEF<0.8) && (Jet_chHEF>0.1) && (Jet_pt>20)
      # bjettight:      bjettight
    variables:
      - Jet_btagDeepFlavB
      - Jet_nConstituents
      - Jet_nTracks_dR0p2
      - Jet_nTracks_dR0p4
      - Jet_nTracks_dR0p2_pt1
      - Jet_nTracks_dR0p4_pt1
      - Jet_mass
      - Jet_eta_sel
      - Jet_phi_sel
    2d_plots:
      - [Jet_eta_sel, Jet_phi_sel]

  SDVTrack:
    selections:
      all:
      # ok:  SDVTrack_isQualityTrack
      # seltk: SDVTrack_isGoodTrack
    variables:
      - SDVTrack_pt
      - SDVTrack_phi
      - SDVTrack_eta
      - SDVTrack_ptError
      - SDVTrack_ptSig
      - SDVTrack_ptSig_inv
      - SDVTrack_charge
      - SDVTrack_qoverp
      - SDVTrack_isInSV
      - SDVTrack_absdxy
      - SDVTrack_absdz
      - SDVTrack_dxyError
      - SDVTrack_dxySig
      - SDVTrack_dzSig
      - SDVTrack_dphi_jet0
      - SDVTrack_deta_jet0
      - SDVTrack_dR_jet0
      - SDVTrack_dphi_MET
      - SDVTrack_dxydzratio
      - SDVTrack_pfRelIso03_all
      - SDVTrack_pfRelIso03_chg
      - SDVTrack_dr03TkSumPt
      - SDVTrack_validFraction
      - SDVTrack_isHighPurity
      - SDVTrack_numberOfValidHits
      - SDVTrack_numberOfLostHits
      - SDVTrack_normalizedChi2

    2d_plots:
      # - [Jet_mass, Jet_btagDeepFlavB]

plot_setting:

  # event vars
  # --------------------------------------------------------------------------------

  LHE_HT:           [LHE_HT,      ';LHE HT (GeV);Counts',     500, 0,  5000]
  MET_pt_corr:      [MET_pt_corr, ';MET_pt_corr (GeV);Counts',   100, 0,  1000]
  MET_phi_corr:     [MET_phi_corr,';MET_phi_corr;Counts',          50, -3.142, 3.142]
  dphi_MET_jet0:    [dphi_MET_jet0, ';dphi_MET_jet0;Counts',   50, 0, 3.142]
  leadingjet_pt_sel:    [leadingjet_pt_sel, ';leadingjet_pt_sel;Counts',   50, 0,  1000]
  leadingjet_phi_sel:   [leadingjet_phi_sel, ';leadingjet_phi_sel;Counts', 50, -3.142, 3.142]
  leadingjet_eta_sel:   [leadingjet_eta_sel, ';leadingjet_eta_sel;Counts', 30, -3,     3]
  nSDVSecVtx:       [nSDVSecVtx, ';nSDVSecVtx;Counts',         20, 0,    20]
  nSDVTrack:        [nSDVTrack, ';nSDVTrack;Counts',           40, 0,   160]
  nbJet_tight:      [nbJet_tight,      ';nbJet_tight;Counts',   8, 0,     8]
  nJet_sel:         [nJet_sel,         ';nJet_sel;Counts',     20, 0,    20]
  PV_ndof:          [PV_ndof,';PV_ndof;Counts',               100 ,0,   500]
  PV_chi2:          [PV_chi2,';PV_chi2;Counts',                50 ,0,     5]
  PV_score:         [PV_score,';PV_score;Counts',             100 ,0,200000]
  PV_npvs:          [PV_npvs,';PV_npvs;Counts',                60 ,0,   120]
  PV_npvsGood:      [PV_npvsGood,';PV_npvsGood;Counts',        60 ,0,   120]
  
  TP_MaxLxySig: [TP_MaxLxySig, ';Max(LxySig);Counts', 30, 0, 300]
  MP_MaxLxySig: [MP_MaxLxySig, ';Max(LxySig);Counts', 30, 0, 300]
  LP_MaxLxySig: [LP_MaxLxySig, ';Max(LxySig);Counts', 30, 0, 300]
  CP_MaxLxySig: [CP_MaxLxySig, ';Max(LxySig);Counts', 30, 0, 300]

  # vertex vars
  # --------------------------------------------------------------------------------
  SDVSecVtx_mass:       [SDVSecVtx_mass,     ';SDVSecVtx_mass (GeV);Counts', 100, 0, 10]
  SDVSecVtx_Lxy:        [SDVSecVtx_Lxy,      ';SDVSecVtx_Lxy (cm);Counts', 40, 0, 40]
  SDVSecVtx_LxySig:     [SDVSecVtx_LxySig,   ';SDVSecVtx_LxySig;Counts', 40, 0, 400]
  SDVSecVtx_pAngle:     [SDVSecVtx_pAngle,   ';SDVSecVtx_pAngle (rad);Counts', 50, 0, 3.142]
  SDVSecVtx_dphiMET:    [SDVSecVtx_dphiMET,  ';SDVSecVtx_dphiMET (rad);Counts', 50, 0, 3.142]
  SDVSecVtx_dphijet0:   [SDVSecVtx_dphijet0, ';SDVSecVtx_dphijet0 (rad);Counts', 50, 0, 3.142]
  SDVSecVtx_nTracks:    [SDVSecVtx_nTracks,  ';SDVSecVtx_nTracks ;Counts', 15, 0, 15]
  SDVSecVtx_ngoodtk:    [SDVSecVtx_ngoodtk,  ';SDVSecVtx_ngoodtk ;Counts', 8, 0, 8]
  SDVSecVtx_ngoodtk_A1:    [SDVSecVtx_ngoodtk_A1,  ';SDVSecVtx_ngoodtk_A1 ;Counts', 15, 0, 15]
  SDVSecVtx_ngoodtk_A2:    [SDVSecVtx_ngoodtk_A2,  ';SDVSecVtx_ngoodtk_A2 ;Counts', 15, 0, 15]
  SDVSecVtx_ngoodtk_A3:    [SDVSecVtx_ngoodtk_A3,  ';SDVSecVtx_ngoodtk_A3 ;Counts', 15, 0, 15]
  SDVSecVtx_ngoodtk_A4:    [SDVSecVtx_ngoodtk_A4,  ';SDVSecVtx_ngoodtk_A4 ;Counts', 15, 0, 15]
  SDVSecVtx_ngoodtkb:   [SDVSecVtx_ngoodtkb, ';SDVSecVtx_ngoodtkb ;Counts', 15, 0, 15]
  SDVSecVtx_nnonputk:   [SDVSecVtx_nnonputk, ';SDVSecVtx_nnonputk ;Counts', 15, 0, 15]
  SDVSecVtx_ndof:       [SDVSecVtx_ndof,     ';SDVSecVtx_ndof ;Counts', 10, 0, 10]
  SDVSecVtx_charge:     [SDVSecVtx_charge,   ';SDVSecVtx_charge ;Counts', 10, -5, 5]

  SDVSecVtx_closestbJetdR_tight:              [SDVSecVtx_closestbJetdR_tight, ';SDVSecVtx_closestbJetdR_tight;Counts',      40, 0, 5    ]
  SDVSecVtx_closestbJetdR_gen:                [SDVSecVtx_closestbJetdR_gen, ';SDVSecVtx_closestbJetdR_gen;Counts',          40, 0, 5    ]
  SDVSecVtx_closestJetdR:                     [SDVSecVtx_closestJetdR, ';SDVSecVtx_closestJetdR;Counts',                    40, 0, 5    ]
  SDVSecVtx_closestbJetdphi_tight:            [SDVSecVtx_closestbJetdphi_tight,  ';SDVSecVtx_closestbJetdphi_tight;Counts', 40, 0, 3.142]
  SDVSecVtx_closestbJetdphi_gen:              [SDVSecVtx_closestbJetdphi_gen,  ';SDVSecVtx_closestbJetdphi_gen;Counts',     40, 0, 3.142]
  SDVSecVtx_closestJetdphi:                   [SDVSecVtx_closestJetdphi, ';SDVSecVtx_closestJetdphi;Counts',                40, 0, 3.142]
  SDVSecVtx_closestbJetdeta_tight:            [SDVSecVtx_closestbJetdeta_tight, ';SDVSecVtx_closestbJetdeta_tight;Counts',  30, 0, 3    ]
  SDVSecVtx_closestbJetdeta_gen:              [SDVSecVtx_closestbJetdeta_gen, ';SDVSecVtx_closestbJetdeta_gen;Counts',      30, 0, 3    ]
  SDVSecVtx_closestJetdeta:                   [SDVSecVtx_closestJetdeta, ';SDVSecVtx_closestJetdeta;Counts',                30, 0, 3    ]
  SDVSecVtx_closestbJet_btagDeepFlavB_tight:  [SDVSecVtx_closestbJet_btagDeepFlavB_tight, ';SDVSecVtx_closestbJet_btagDeepFlavB_tight;Counts', 50, 0.50, 1]
  SDVSecVtx_closestbJet_btagDeepFlavB_gen:    [SDVSecVtx_closestbJet_btagDeepFlavB_gen, ';SDVSecVtx_closestbJet_btagDeepFlavB_gen;Counts',     50, 0.50, 1]
  
  
  SDVSecVtx_TkMaxdphi: [SDVSecVtx_TkMaxdphi, ';SDVSecVtx_TkMaxdphi;Counts', 50, 0, 4]
  SDVSecVtx_TkMindphi: [SDVSecVtx_TkMindphi, ';SDVSecVtx_TkMindphi;Counts', 50, 0, 4]
  SDVSecVtx_TkMaxdeta: [SDVSecVtx_TkMaxdeta, ';SDVSecVtx_TkMaxdeta;Counts', 30, 0, 3]
  SDVSecVtx_TkMindeta: [SDVSecVtx_TkMindeta, ';SDVSecVtx_TkMindeta;Counts', 30, 0, 3]
  SDVSecVtx_TkMaxdR:   [SDVSecVtx_TkMaxdR,   ';SDVSecVtx_TkMaxdR;Counts', 50, 0, 10]
  SDVSecVtx_TkMindR:   [SDVSecVtx_TkMindR,   ';SDVSecVtx_TkMindR;Counts', 50, 0, 10]
  SDVSecVtx_TkMindxy:  [SDVSecVtx_TkMindxy,  ';SDVSecVtx_TkMindxy;Counts', 20, 0, 20]
  SDVSecVtx_TkMaxdxy:  [SDVSecVtx_TkMaxdxy,  ';SDVSecVtx_TkMaxdxy;Counts', 20, 0, 20]


  # jet vars
  # --------------------------------------------------------------------------------

  Jet_btagDeepFlavB:      [Jet_btagDeepFlavB,     ';Jet_btagDeepFlavB;Counts',    100,  0,        1   ]
  Jet_nConstituents:      [Jet_nConstituents,     ';Jet_nConstituents;Counts',     20,  0,      100   ]
  Jet_nTracks_dR0p2:      [Jet_nTracks_dR0p2,     ';Jet_nTracks_dR0p2;Counts',     40,  0,       40   ]
  Jet_nTracks_dR0p4:      [Jet_nTracks_dR0p4,     ';Jet_nTracks_dR0p4;Counts',     40,  0,       40   ]
  Jet_nTracks_dR0p2_pt1:  [Jet_nTracks_dR0p2_pt1, ';Jet_nTracks_dR0p2_pt1;Counts', 40,  0,       40   ]
  Jet_nTracks_dR0p4_pt1:  [Jet_nTracks_dR0p4_pt1, ';Jet_nTracks_dR0p4_pt1;Counts', 40,  0,       40   ]
  Jet_mass:               [Jet_mass,              ';Jet_mass (GeV);Counts',        40,  0,       40   ]
  Jet_pt_sel:             [Jet_pt_sel,            ';Jet_pt_sel (GeV);Counts',      50,  0,      1000  ]
  Jet_phi_sel:            [Jet_phi_sel,           ';Jet_phi_sel;Counts',          120, -3.142, 3.142  ]
  Jet_eta_sel:            [Jet_eta_sel,           ';Jet_eta_sel;Counts',          180,  -4.50,    4.50]

  # track vars
  # --------------------------------------------------------------------------------

  SDVTrack_pt:                [SDVTrack_pt, ';SDVTrack_pt (GeV);Counts',            50, 0, 100]
  SDVTrack_phi:               [SDVTrack_phi, ';SDVTrack_phi;Counts',                50, -3.142, 3.142] # 2*pi
  SDVTrack_eta:               [SDVTrack_eta, ';SDVTrack_eta;Counts',                50, -3, 3] # about 10 degrees polar angle
  SDVTrack_ptError:           [SDVTrack_ptError, ';SDVTrack_ptError;Counts',        50, 0, 5]
  SDVTrack_ptSig:             [SDVTrack_ptSig, ';SDVTrack_ptSig;Counts',            50, 50, 500]
  SDVTrack_ptSig_inv:         [SDVTrack_ptSig_inv, ';SDVTrack_ptSig_inv;Counts',    50, 0, 0.03]
  SDVTrack_charge:            [SDVTrack_charge, ';SDVTrack_charge;Counts',          10, -5, 5]
  SDVTrack_qoverp:            [SDVTrack_qoverp, ';SDVTrack_qoverp;Counts',          50, -5, 5]
  SDVTrack_isInSV:            [SDVTrack_isInSV, ';SDVTrack_isInSV;Counts',           2, 0, 2]
  SDVTrack_absdxy:            [SDVTrack_absdxy, ';SDVTrack_absdxy;Counts',          50, 0, 0.5]
  SDVTrack_absdz:             [SDVTrack_absdz, ';SDVTrack_absdz;Counts',            50, 0, 5]
  SDVTrack_dxyError:          [SDVTrack_dxyError, ';SDVTrack_dxyError;Counts',      50, 0, 0.5]
  SDVTrack_dxySig:            [SDVTrack_dxySig, ';SDVTrack_dxySig;Counts',          50, 0, 100]
  SDVTrack_dzSig:             [SDVTrack_dzSig, ';SDVTrack_dzSig;Counts',            50, 0, 100]
  SDVTrack_dphi_jet0:         [SDVTrack_dphi_jet0, ';SDVTrack_dphi_jet0;Counts',    50, 0, 3.142]
  SDVTrack_deta_jet0:         [SDVTrack_deta_jet0, ';SDVTrack_deta_jet0;Counts',    30, 0, 3]
  SDVTrack_dR_jet0:           [SDVTrack_dR_jet0, ';SDVTrack_dR_jet0;Counts',        50, 0, 3.976]
  SDVTrack_dphi_MET:          [SDVTrack_dphi_MET, ';SDVTrack_dphi_MET;Counts',      50, 0, 3.142]
  SDVTrack_dxydzratio:        [SDVTrack_dxydzratio, ';SDVTrack_dxydzratio;Counts',  50, 0, 1]
  SDVTrack_pfRelIso03_all:    [SDVTrack_pfRelIso03_all, ';SDVTrack_pfRelIso03_all;Counts',        50, 0, 20]
  SDVTrack_pfRelIso03_chg:    [SDVTrack_pfRelIso03_chg, ';SDVTrack_pfRelIso03_chg;Counts',        50, 0, 10]
  SDVTrack_dr03TkSumPt:       [SDVTrack_dr03TkSumPt, ';SDVTrack_dr03TkSumPt;Counts',              50, 0, 50]
  SDVTrack_validFraction:     [SDVTrack_validFraction, ';SDVTrack_validFraction;Counts',          20, 0,  1]
  SDVTrack_isHighPurity:      [SDVTrack_isHighPurity, ';SDVTrack_isHighPurity;Counts',             2, 0,  1]
  SDVTrack_numberOfValidHits: [SDVTrack_numberOfValidHits, ';SDVTrack_numberOfValidHits;Counts',  30, 0, 30]
  SDVTrack_numberOfLostHits:  [SDVTrack_numberOfLostHits, ';SDVTrack_numberOfLostHits;Counts',    20, 0, 20]
  SDVTrack_normalizedChi2:    [SDVTrack_normalizedChi2, ';SDVTrack_normalizedChi2;Counts',        30, 0, 6]

  # muon vars
  # --------------------------------------------------------------------------------

  Muon_pt:                [Muon_pt,       ';Muon_pt (GeV);Counts',           50,   0,    50    ]
  Muon_phi:               [Muon_phi,      ';Muon_phi;Counts',                50,  -3.142, 3.142] # 2*pi
  Muon_eta:               [Muon_eta,      ';Muon_eta;Counts',                50,   -3,     3] # about 10 degrees polar angle
  Muon_dphiMET:           [Muon_dphiMET,  ';Muon_dphiMET (rad);Counts',      50,   0,     3.142]
  Muon_dphijet0:          [Muon_dphijet0, ';Muon_dphijet0 (rad);Counts',      50,  0,     3.142]

  # electron vars
  # --------------------------------------------------------------------------------

  Electron_pt:                [Electron_pt,       ';Electron_pt (GeV);Counts',           50,   0,    50    ]
  Electron_phi:               [Electron_phi,      ';Electron_phi;Counts',                50,  -3.142, 3.142] # 2*pi
  Electron_eta:               [Electron_eta,      ';Electron_eta;Counts',                50,   -3,     3] # about 10 degrees polar angle
  Electron_dphiMET:           [Electron_dphiMET,  ';Electron_dphiMET (rad);Counts',      50,   0,     3.142]
  Electron_dphijet0:          [Electron_dphijet0, ';Electron_dphijet0 (rad);Counts',      50,  0,     3.142]

  # tau vars
  # --------------------------------------------------------------------------------

  Tau_pt:                [Tau_pt,       ';Tau_pt (GeV);Counts',           50,   0,    50    ]
  Tau_phi:               [Tau_phi,      ';Tau_phi;Counts',                50,  -3.142, 3.142] # 2*pi
  Tau_eta:               [Tau_eta,      ';Tau_eta;Counts',                50,   -3,     3] # about 10 degrees polar angle
  Tau_dphiMET:           [Tau_dphiMET,  ';Tau_dphiMET (rad);Counts',      50,   0,     3.142]
  Tau_dphijet0:          [Tau_dphijet0, ';Tau_dphijet0 (rad);Counts',     50,  0,     3.142]






